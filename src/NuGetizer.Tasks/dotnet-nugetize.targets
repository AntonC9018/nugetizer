<!--
***********************************************************************************************
dotnet-nugetize.targets

WARNING:  DO NOT MODIFY this file unless you are knowledgeable about MSBuild and have
          created a backup copy.  Incorrect changes to this file will make it
          impossible to load or build your projects from the command-line or the IDE.

Copyright (c) .NET Foundation. All rights reserved. 
***********************************************************************************************
-->
<Project>

  <Target Name="CopyFilesToOutputDirectory" />

  <Target Name="_WritePackageContents" Condition="'$(dotnet-nugetize)' != ''" AfterTargets="GetPackageContents">
    <PropertyGroup>
      <_AbsoluteNuspecFile Condition="$([System.IO.Path]::IsPathRooted($(NuspecFile)))">$(NuspecFile)</_AbsoluteNuspecFile>
      <_AbsoluteNuspecFile Condition="'$(_NuspecFile)' == ''">$(MSBuildProjectDirectory.TrimEnd('\'))\$(NuspecFile)</_AbsoluteNuspecFile>
      <_AbsoluteNuspecFile>$([System.IO.Path]::GetFullPath('$(_AbsoluteNuspecFile)'))</_AbsoluteNuspecFile>
    </PropertyGroup>    
    <ItemGroup>
      <PackageMetadata Update="@(PackageMetadata)" Nuspec="$(_AbsoluteNuspecFile)" NuPkg="@(PackageTargetPath)" />
      <PackageContent Include="@(_PackageContent)" Exclude="@(PackageMetadata)" />
    </ItemGroup>
    <WriteItemsToFile Overwrite="false" Items="@(PackageMetadata)" ItemName="PackageMetadata" File="$(dotnet-nugetize)" />
    <WriteItemsToFile Overwrite="false" Items="@(PackageContent)" ItemName="PackageContent" File="$(dotnet-nugetize)" />
  </Target>

</Project>